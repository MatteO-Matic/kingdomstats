function jsonpophorse(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=29,defaultchecked=["checkbox_ItemName"],spawntable()}function populatetablehorse(){$.getJSON("/cn/data/0179_cn/horse.json",jsonpophorse)}function populatetableshield(){$.getJSON("/cn/data/0179_cn/shield.json",jsonpopshield)}function jsonpopshield(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=29,defaultchecked=["checkbox_ItemName"],spawntable()}function jsonpophorsearmors(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=29,defaultchecked=["checkbox_ItemName"],spawntable()}function populatetablehorsearmors(){$.getJSON("/cn/data/0179_cn/horsearmor.json",jsonpophorsearmors)}function jsonpopadjutants(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=29,defaultchecked=["checkbox_nFight","checkbox_nQibing","checkbox_nQishe","checkbox_nGongnu","checkbox_nBubing","checkbox_nStrategy","checkbox_fHealth","checkbox_SoldierName"],spawntable()}function populatetableadjutants(){$.getJSON("/cn/data/0179_cn/adjutants.json",jsonpopadjutants)}function jsonpopranged(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=29,defaultchecked=["checkbox_ItemName","checkbox_FetchingTime","checkbox_Level","checkbox_LongRangeDamage","checkbox_LoadAmmoTime","checkbox_ShootDamageFactor"],spawntable()}function populatetableranged(){$.getJSON("/cn/data/0179_cn/rangedweapon.json",jsonpopranged)}function jsonpopmelee(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=48,defaultchecked=["checkbox_ItemName","checkbox_Level","checkbox_Attackspeed","checkbox_DpsCut","checkbox_DpsPuncture"],spawntable()}function populatetablemelee(){$.getJSON("/cn/data/0179_cn/meleeweapon.json",jsonpopmelee)}function jsonpoparmor(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=10,defaultchecked=["checkbox_ItemName","checkbox_MetalDefenseValue","checkbox_Level","checkbox_MetalFailPro"],spawntable()}function populatetablearmor(){$.getJSON("/cn/data/0179_cn/armor.json",jsonpoparmor)}function populatetablesoldiers(){$.getJSON("/cn/data/0179_cn/soldiers.json",jsonpopsoldiers)}function jsonpopsoldiers(e){tablecolumns={},tablecolumns[0]=e.data[0],ajaxdata=e.data,column_level_index=52,defaultchecked=["checkbox_MaxSpeed","checkbox_fHealth","checkbox_SoldierName","checkbox_Level"],spawntable()}function populatetablearmytype(){}function urlObject(e){"use strict";var a,t,n,o,l,c,s,m,u={},i=document.createElement("a"),d={url:window.location.href,unescape:!0,convert_num:!0};if("object"!=typeof e)e=d;else for(t in d)d.hasOwnProperty(t)&&void 0===e[t]&&(e[t]=d[t]);if(i.href=e.url,m=i.search.substring(1),a=m.split("&"),a[0].length>1)for(n=0;n<a.length;n+=1)l=a[n].split("="),e.unescape?(c=decodeURI(l[0]),s=decodeURI(l[1])):(c=l[0],s=l[1]),e.convert_num&&(s.match(/^\d+$/)?s=parseInt(s,10):s.match(/^\d+\.\d+$/)&&(s=parseFloat(s))),void 0===u[c]?u[c]=s:"string"==typeof u[c]?u[c]=[u[c],s]:u[c].push(s),l=[];return o={protocol:i.protocol,hostname:i.hostname,host:i.host,port:i.port,hash:i.hash.substr(1),pathname:i.pathname,search:i.search,parameters:u}}function getDataTableUrl(){var e=$("#hellotable").DataTable(),a=window.location.origin+window.location.pathname+"?";return a+="cf=",e.columns().every(function(e){this.visible()&&(a+=e+",")}),a+="&",""!=document.getElementById("max").value&&(a+="lmax="+document.getElementById("max").value+"&"),""!=document.getElementById("min").value&&(a+="lmin="+document.getElementById("min").value+"&"),a}function spawntable(){function e(e){element=document.getElementById(e),element.checked=!element.checked;var a=u.column($(element).attr("data-column"));a.visible(element.checked)}if(null==imagepath_json)return void $.getJSON("/data/0179_cn/imagepaths.json",function(e){imagepath_json=e,spawntable()});var a=window.location.href,t=urlObject(a).parameters,n=[],o=tablecolumns[0],l=Object.keys(o),c=0;l.forEach(function(e){("ItemName"==e||"SoldierName"==e)&&(itemname_column_index=c),"Level"==e&&(column_level_index=c),n.push({title:e,data:e}),c++});var s=window.location.pathname,m=s.split("/").pop().split(".")[0],u=$("#hellotable").DataTable({deferRender:!0,columns:n,paging:!0,scrollX:!0,iDisplayLength:25,aaData:ajaxdata,columnDefs:[{targets:["_all"],visible:!1},{targets:itemname_column_index,render:function(e,a,t,n){if(-1==itemname_column_index)return"";if(!imagepath_json[t.ItemId])return"";var o=imagepath_json[t.ItemId][0];return"soldiers"==m&&(o=imagepath_json[t.ItemId][1]),'<img class="tableimage img-thumbnail" src="https://www.tkstats.info/assets'+o+'"/> '+e}}]});if(u.rows.add(tablecolumns).draw(),$("#hellotable tbody").on("click","tr",function(){var e=u.row(this).data();window.open("https://www.tkstats.info/cn/item/"+e.ItemId)}),null!=t.lmax&&(document.getElementById("max").value=t.lmax),null!=t.lmin&&(document.getElementById("min").value=t.lmin),null!=t.cf)if(t.cf.constructor==stringConstructor){for(var i=t.cf.split(","),d=0;d<i.length;++d)if(null!=i[d]&&""!=i[d]){var r=u.column(i[d]);r.visible(!0);var h=document.getElementById("cblist").getElementsByTagName("li"),p=h[i[d]].getElementsByTagName("input")[0];p.checked=!0}}else console.debug("Unknown filter constructor");else for(d=0;d<defaultchecked.length;d++)e(defaultchecked[d]);$("input.toggle-vis").on("change",function(e){e.preventDefault();var a=u.column($(this).attr("data-column"));a.visible(this.checked)}),$("#min, #max").keyup(function(){u.draw()})}var defaultchecked=[],stringConstructor="test".constructor,arrayConstructor=[].constructor,objectConstructor={}.constructor,column_level_index=-1,itemname_column_index=-1;$.fn.dataTable.ext.search.push(function(e,a,t){var n=parseInt($("#min").val(),10),o=parseInt($("#max").val(),10),l=parseFloat(a[column_level_index])||0;return isNaN(n)&&isNaN(o)||isNaN(n)&&o>=l||l>=n&&isNaN(o)||l>=n&&o>=l?!0:!1});var imagepath_json;